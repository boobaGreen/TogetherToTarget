/* Mobile Optimization Fixes per TogetherToGoal */

/* Base mobile fixes */
@media (max-width: 768px) {
  /* HomePage Mobile Fixes */
  .home-container {
    padding: 20px 16px !important;
    max-width: 100% !important;
  }

  .home-header {
    margin-bottom: 24px !important;
  }

  .home-title {
    font-size: 2rem !important;
    line-height: 1.2 !important;
    flex-direction: column !important;
    gap: 8px !important;
  }

  .home-title-emoji {
    font-size: 2.5rem !important;
  }

  .home-subtitle {
    font-size: 1rem !important;
    margin-bottom: 1.5rem !important;
  }

  .home-cta-buttons {
    flex-direction: column !important;
    gap: 12px !important;
    align-items: stretch !important;
  }

  .home-cta-button {
    width: 100% !important;
    text-align: center !important;
    padding: 14px 20px !important;
    font-size: 1rem !important;
  }

  /* Onboarding Mobile Fixes */
  .onboarding-container {
    padding: 16px !important;
    max-width: 100% !important;
  }

  .onboarding-header {
    padding: 20px !important;
    margin-bottom: 20px !important;
  }

  .onboarding-title {
    font-size: 1.75rem !important;
    line-height: 1.3 !important;
  }

  .onboarding-emoji {
    font-size: 2rem !important;
  }

  .onboarding-step-content {
    max-width: 100% !important;
    padding: 20px 16px !important;
  }

  .onboarding-navigation {
    padding: 16px !important;
    flex-direction: column !important;
    gap: 12px !important;
  }

  .onboarding-nav-button {
    width: 100% !important;
    padding: 14px 20px !important;
    font-size: 1rem !important;
  }

  /* Dashboard Mobile Fixes - OTTIMIZZATI */
  .dashboard-container {
    padding: 16px !important;
    max-width: 100% !important;
  }

  /* Demo Banner mobile */
  .dashboard-container > div:first-child {
    padding: 16px !important;
    margin-bottom: 20px !important;
    border-radius: 8px !important;
  }

  .dashboard-container > div:first-child h2 {
    font-size: 1.25rem !important;
    margin-bottom: 8px !important;
  }

  .dashboard-container > div:first-child p {
    font-size: 0.875rem !important;
    line-height: 1.4 !important;
  }

  /* Dashboard Header mobile */
  .dashboard-container > header {
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 16px !important;
    padding: 16px !important;
    margin-bottom: 20px !important;
    border-radius: 8px !important;
  }

  .dashboard-container > header > div:first-child h1 {
    font-size: 1.5rem !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 8px !important;
    text-align: left !important;
  }

  .dashboard-container > header > div:first-child h1 > span:first-child {
    font-size: 1.5rem !important;
  }

  .dashboard-container > header > div:first-child p {
    font-size: 0.875rem !important;
    margin-top: 8px !important;
    opacity: 0.7 !important;
  }

  .dashboard-container > header > button {
    align-self: stretch !important;
    justify-content: center !important;
    padding: 12px 16px !important;
    font-size: 0.875rem !important;
    min-height: 48px !important;
  }

  /* Dashboard Cards mobile - FIX PER ONEPLUS CE3 */
  .dashboard-cards {
    grid-template-columns: 1fr !important;
    gap: 16px !important;
    /* Forza layout a colonna singola su tutti i mobile */
    display: grid !important;
  }

  .dashboard-card {
    padding: 16px !important;
    border-radius: 8px !important;
    width: 100% !important;
    max-width: 100% !important;
    min-width: unset !important;
  }

  .dashboard-card-icon {
    font-size: 2rem !important;
    margin-bottom: 12px !important;
  }

  .dashboard-card-title {
    font-size: 1.125rem !important;
    margin-bottom: 12px !important;
  }

  /* Dashboard Main Grid mobile - FIX OBIETTIVI E ATTIVITA */
  .dashboard-main-grid {
    grid-template-columns: 1fr !important;
    gap: 16px !important;
    margin-top: 20px !important;
  }

  .dashboard-goals-section,
  .dashboard-activity-section {
    padding: 16px !important;
    border-radius: 8px !important;
  }

  .dashboard-goals-section h2,
  .dashboard-activity-section h2 {
    font-size: 1.25rem !important;
    margin-bottom: 16px !important;
  }

  /* Profile Edit Mobile Fixes - OTTIMIZZATI */
  .profile-edit-container {
    padding: 16px !important;
    max-width: 100% !important;
  }

  /* Profile Edit Demo Banner */
  .profile-edit-container > div:first-child {
    padding: 16px !important;
    margin-bottom: 20px !important;
    border-radius: 8px !important;
  }

  .profile-edit-container > div:first-child h2 {
    font-size: 1.25rem !important;
    margin-bottom: 8px !important;
  }

  .profile-edit-container > div:first-child p {
    font-size: 0.875rem !important;
    line-height: 1.4 !important;
  }

  /* Profile Edit Header */
  .profile-edit-container > header {
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 16px !important;
    padding: 16px !important;
    margin-bottom: 20px !important;
    border-radius: 8px !important;
  }

  .profile-edit-container > header > div h1 {
    font-size: 1.5rem !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 8px !important;
  }

  .profile-edit-container > header > div h1 > span:first-child {
    font-size: 1.5rem !important;
  }

  .profile-edit-container > header > button {
    align-self: stretch !important;
    justify-content: center !important;
    padding: 12px 16px !important;
    font-size: 0.875rem !important;
    min-height: 48px !important;
  }

  /* Profile Form Sections */
  .profile-form-section {
    padding: 16px !important;
    margin-bottom: 16px !important;
    border-radius: 8px !important;
  }

  .profile-form-section h3 {
    font-size: 1.125rem !important;
    margin-bottom: 12px !important;
  }

  /* Profile Form Inputs */
  .profile-form-section input,
  .profile-form-section select,
  .profile-form-section textarea {
    width: 100% !important;
    padding: 12px !important;
    font-size: 16px !important;
    border-radius: 6px !important;
    margin-bottom: 12px !important;
  }

  /* Profile Form Buttons */
  .profile-form-buttons {
    flex-direction: column !important;
    gap: 12px !important;
    padding: 16px !important;
  }

  .profile-form-button {
    width: 100% !important;
    padding: 14px 20px !important;
    font-size: 1rem !important;
    justify-content: center !important;
    min-height: 48px !important;
    border-radius: 6px !important;
  }

  /* Success Page Mobile Fixes */
  .success-container {
    padding: 16px !important;
    max-width: 100% !important;
  }

  .success-content {
    padding: 24px 16px !important;
  }

  .success-title {
    font-size: 1.75rem !important;
  }

  .success-button {
    width: 100% !important;
    padding: 14px 20px !important;
    font-size: 1rem !important;
  }
}

/* Extra small screens (iPhone SE, small Android) */
@media (max-width: 375px) {
  /* Titoli ancora più piccoli per schermi molto piccoli */
  .home-title {
    font-size: 1.75rem !important;
  }

  .home-title-emoji {
    font-size: 2rem !important;
  }

  .onboarding-title {
    font-size: 1.5rem !important;
  }

  .onboarding-emoji {
    font-size: 1.75rem !important;
  }

  /* Dashboard titoli extra small */
  .dashboard-container > header > div:first-child h1 {
    font-size: 1.25rem !important;
  }

  .dashboard-card-title {
    font-size: 1rem !important;
  }

  .dashboard-card-icon {
    font-size: 1.75rem !important;
  }

  /* Dashboard Cards extra small - ONEPLUS CE3 */
  .dashboard-cards {
    gap: 12px !important;
  }

  .dashboard-card {
    padding: 12px !important;
    margin-bottom: 0 !important;
  }

  .dashboard-card-icon {
    font-size: 1.5rem !important;
    margin: 8px 0 !important;
  }

  .dashboard-card-title {
    font-size: 0.95rem !important;
    margin-bottom: 8px !important;
  }

  /* Dashboard Main Grid extra small */
  .dashboard-main-grid {
    gap: 12px !important;
    margin-top: 16px !important;
  }

  .dashboard-goals-section,
  .dashboard-activity-section {
    padding: 12px !important;
  }

  .dashboard-goals-section h2,
  .dashboard-activity-section h2 {
    font-size: 1.1rem !important;
    margin-bottom: 12px !important;
  }

  /* Profile edit titoli extra small */
  .profile-edit-container > header > div h1 {
    font-size: 1.25rem !important;
  }

  .profile-form-section h3 {
    font-size: 1rem !important;
  }

  /* Padding ridotto per schermi molto piccoli */
  .home-container,
  .onboarding-container,
  .dashboard-container,
  .profile-edit-container,
  .success-container {
    padding: 12px !important;
  }

  /* Demo banner padding ridotto */
  .dashboard-container > div:first-child,
  .profile-edit-container > div:first-child {
    padding: 12px !important;
    margin-bottom: 16px !important;
  }

  /* Header padding ridotto */
  .dashboard-container > header,
  .profile-edit-container > header {
    padding: 12px !important;
    margin-bottom: 16px !important;
  }

  /* Cards padding ridotto */
  .dashboard-card,
  .profile-form-section {
    padding: 12px !important;
  }

  /* Auth card più piccola */
  .auth-card {
    padding: 1.25rem !important;
    margin: 0.5rem !important;
  }

  .auth-header h1 {
    font-size: 1.5rem !important;
  }

  .auth-header h2 {
    font-size: 1.125rem !important;
  }
}

/* Landscape orientation fixes per mobile */
@media (max-height: 500px) and (orientation: landscape) {
  .auth-container {
    padding: 0.5rem !important;
    align-items: flex-start !important;
    padding-top: 2rem !important;
  }

  .auth-card {
    margin: 0 auto !important;
    max-height: 90vh !important;
    overflow-y: auto !important;
  }

  .home-container {
    padding-top: 1rem !important;
  }

  .onboarding-container {
    min-height: auto !important;
  }
}

/* Fix per messaggi e notifiche su mobile */
@media (max-width: 768px) {
  .message-container {
    margin: 0 -16px 16px -16px !important;
    border-radius: 0 !important;
    border-left: none !important;
    border-right: none !important;
  }

  .error-message,
  .success-message {
    font-size: 0.875rem !important;
    padding: 12px 16px !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 8px !important;
  }

  .error-close,
  .message-close {
    align-self: flex-end !important;
    margin-left: 0 !important;
  }
}

/* Fix per form elements su mobile */
@media (max-width: 768px) {
  .form-group input,
  .form-group select,
  .form-group textarea {
    font-size: 16px !important; /* Previene zoom su iOS */
    padding: 12px !important;
  }

  .auth-button {
    padding: 14px 20px !important;
    font-size: 1rem !important;
    min-height: 48px !important; /* Touch target iOS/Android */
  }

  /* Fix per dropdown e select */
  .category-card,
  .experience-option,
  .availability-option {
    min-height: 48px !important;
    padding: 12px !important;
  }
}

/* Fix specifici per schermi piccoli come OnePlus CE3 */
@media (max-width: 480px) {
  /* Forza layout verticale per dashboard cards */
  .dashboard-cards {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
    width: 100% !important;
  }

  .dashboard-card {
    width: 100% !important;
    min-width: unset !important;
    max-width: 100% !important;
    margin: 0 !important;
    padding: 14px !important;
  }

  /* Riduci ulteriormente font su schermi molto piccoli */
  .dashboard-card-title {
    font-size: 0.9rem !important;
  }

  .dashboard-card-icon {
    font-size: 1.4rem !important;
  }

  .dashboard-container {
    padding: 12px !important;
  }

  /* Main Grid per schermi molto piccoli */
  .dashboard-main-grid {
    grid-template-columns: 1fr !important;
    gap: 10px !important;
    margin-top: 12px !important;
  }

  .dashboard-goals-section,
  .dashboard-activity-section {
    padding: 10px !important;
  }

  .dashboard-goals-section h2,
  .dashboard-activity-section h2 {
    font-size: 1rem !important;
    margin-bottom: 10px !important;
  }
}

/* Fix specifici per iOS Safari */
@supports (-webkit-touch-callout: none) {
  /* Fix per 100vh bug su iOS */
  .auth-container,
  .home-container,
  .onboarding-container {
    min-height: -webkit-fill-available !important;
  }

  /* Fix per input zoom */
  input,
  select,
  textarea {
    font-size: 16px !important;
  }
}

/* Fix per Android Chrome */
@media screen and (-webkit-min-device-pixel-ratio: 1) {
  /* Migliora rendering testo su Android */
  body {
    -webkit-text-size-adjust: 100% !important;
    text-size-adjust: 100% !important;
  }
}
